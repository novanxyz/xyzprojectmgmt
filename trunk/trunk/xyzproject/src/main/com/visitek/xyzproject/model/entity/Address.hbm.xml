<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 19 Jan 10 11:48:51 by Hibernate Tools 3.2.5.Beta -->
<hibernate-mapping>
    <class name="com.visitek.xyzproject.model.entity.Address" entity-name="Address"    	
	    table="addresses" >
        <id type="java.lang.Long">
            <column name="address_id" />
            <generator class="increment" />
        </id>
        
        <property name="street" type="java.lang.String">
            <column name="ADDRESS1" />
        </property>                
        <property name="city" type="java.lang.String">
            <column name="ADDRESS_CITY" />
        </property>
        <property name="state" type="java.lang.String">
            <column name="ADDRESS_STATE" />
        </property>
        <property name="country" type="java.lang.String">
            <column name="ADDRESS_COUNTRY" />
        </property>
        <property name="zipCode" type="java.lang.String">
            <column name="ADDRESS_ZIPCODE" />
        </property>
        
        <property name="phoneNo" type="java.lang.String">
            <column name="ADDRESS_PHONE" />
        </property>
        <property name="mobileNo" type="java.lang.String">
            <column name="ADDRESS_MOBILE" />
        </property>
        <property name="faxNo" type="java.lang.String">
            <column name="ADDRESS_FAX" />
        </property>
        
        
        <property name="email" type="java.lang.String">
            <column name="ADDRESS_EMAIL" />
        </property>        
        <property name="url" type="java.lang.String">
            <column name="ADDRESS_URL" />
        </property>        
        <property name="location" type="java.lang.String">
            <column name="ADDRESS_LOCATION" />
        </property>
                        
    </class>
    
    <sql-query name="addrByLocation">
    	<return alias="addr" class="com.visitek.xyzproject.model.entity.Address"/>
    	<![CDATA[
        select *
		from addresses
		where 				
		abs(left(address_location,INSTR( address_location,',') -1 )  - :lo )  <= :radius )
		and		
		abs(RIGHT(address_location,  length(address_location) - INSTR(address_location,',')) - :lat )  <= :radius 
		
		]]>
	</sql-query>
</hibernate-mapping>
